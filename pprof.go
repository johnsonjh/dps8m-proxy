//go:build pprof

///////////////////////////////////////////////////////////////////////////////////////////////////
// DPS8M Proxy - pprof.go
// Copyright (c) 2025 Jeffrey H. Johnson
// Copyright (c) 2025 The DPS8M Development Team
// SPDX-License-Identifier: MIT
///////////////////////////////////////////////////////////////////////////////////////////////////

// DPS8M Proxy
package main

///////////////////////////////////////////////////////////////////////////////////////////////////

import (
	"log"
	"net/http"
	_ "net/http/pprof"
)

///////////////////////////////////////////////////////////////////////////////////////////////////

func init() {
	go func() {
		log.Printf("\r%s DEBUG: %sStarting pprof [localhost:6060]\r\n",
			nowStamp(), bugPrefix())
		log.Println(http.ListenAndServe("localhost:6060", nil))
	}()
}

///////////////////////////////////////////////////////////////////////////////////////////////////

func bugPrefix() string {
	if haveUTF8console {
		return "üêõ " // (De)bug
	}

	return ""
}

///////////////////////////////////////////////////////////////////////////////////////////////////
// vim: set ft=go noexpandtab tabstop=4 cc=100 :
///////////////////////////////////////////////////////////////////////////////////////////////////
