//go:build plan9
// +build plan9

///////////////////////////////////////////////////////////////////////////////////////////////////
// DPS8M Proxy - signals_unix.go
// Copyright (c) 2025 Jeffrey H. Johnson
// Copyright (c) 2025 The DPS8M Development Team
// SPDX-License-Identifier: MIT
///////////////////////////////////////////////////////////////////////////////////////////////////

package main

///////////////////////////////////////////////////////////////////////////////////////////////////

import (
	"log"
	"os"
	"os/signal"
	"syscall"
)

///////////////////////////////////////////////////////////////////////////////////////////////////

func runSignalHandlers() {
	sigChan := make(chan os.Signal, 1)
	signal.Notify(sigChan,
		syscall.SIGINT, syscall.SIGHUP)

	go func() {
		for s := range sigChan {
			switch s {
			case syscall.SIGHUP:
				log.Println("SIGHUP received: Reloading whitelist and/or blacklist.")
				reloadLists()

			case syscall.SIGINT:
				immediateShutdown()
			}
		}
	}()
}

///////////////////////////////////////////////////////////////////////////////////////////////////
// vim: set ft=go noexpandtab tabstop=4 cc=100 :
///////////////////////////////////////////////////////////////////////////////////////////////////
