//go:build !plan9 && !windows && !wasip1

///////////////////////////////////////////////////////////////////////////////////////////////////
// DPS8M Proxy - gops_common.go
// Copyright (c) 2025 Jeffrey H. Johnson
// Copyright (c) 2025 The DPS8M Development Team
// SPDX-License-Identifier: MIT
// scspell-id: 842298dc-6bd1-11f0-ba59-80ee73e9b8e7
///////////////////////////////////////////////////////////////////////////////////////////////////

// DPS8M Proxy
//
//nolint:godoclint,nolintlint
package main

///////////////////////////////////////////////////////////////////////////////////////////////////

import (
	"github.com/google/gops/agent"
)

///////////////////////////////////////////////////////////////////////////////////////////////////

const gopsEnabled = true

///////////////////////////////////////////////////////////////////////////////////////////////////

func gopsInit() {
	go func() {
		_ = agent.Listen(agent.Options{
			ReuseSocketAddrAndPort: true,
			ShutdownCleanup:        false,
		})
	}()
}

///////////////////////////////////////////////////////////////////////////////////////////////////

func gopsClose() {
	agent.Close()
}

///////////////////////////////////////////////////////////////////////////////////////////////////
// vim: set ft=go noexpandtab tabstop=4 cc=100 :
///////////////////////////////////////////////////////////////////////////////////////////////////
